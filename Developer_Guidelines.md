# Troll-vs-Troll 项目开发者指南

## 版本日志
- v1.0.0 2025-12-28: 初始版本 - 成功
- v1.0.1 2025-12-28: 添加版本日志要求规范 - 成功

## 1. 项目概述

Troll-vs-Troll（拉杆载具防侧翻系统）是一个基于UNIHIKER M10行空板的电子差速防侧翻安全系统，旨在通过实时轮速监测来增强拉杆载具（如行李箱）在转向时的稳定性，防止侧翻事故的发生。

## 2. 开发环境配置

### 2.1 硬件要求
- UNIHIKER M10 行空板
- 相关传感器（如轮速传感器、加速度传感器等）
- 电机控制模块（如需要）

### 2.2 软件要求
- Python 3.7 或更高版本（推荐升级至 Python 3.12）
- unihiker 库：`pip install unihiker`
- 其他依赖库根据具体功能需求安装

## 3. 开发规范

### 3.1 代码风格
- 遵循 PEP 8 Python 代码风格指南
- 使用有意义的变量名和函数名
- 保持一致的缩进（4个空格）
- 函数和类必须包含文档字符串（docstring）

### 3.2 模块引入规范
- **必须详细阅读并查看API文档**：在开发过程中引入任何第三方模块时，必须先详细阅读其API文档，理解其功能、参数和返回值
- 在代码注释中简要说明引入模块的目的和关键用法
- 避免引入不必要的模块，保持代码简洁

### 3.3 TODO管理规程
- **必须严格遵守先写TODO再根据TODO完成程序的规程**：
  - 在开始开发新功能前，先在代码中添加TODO注释，明确功能需求
  - TODO格式：`# TODO: [功能描述] - [优先级] - [负责人]`
  - 优先级：HIGH（高）、MEDIUM（中）、LOW（低）
- **仅在一个功能完全测试通过时，才消除该TODO**：
  - 功能必须通过单元测试和集成测试
  - 需要经过代码审查（Code Review）
  - 确认功能按预期工作且无副作用

## 4. 代码结构

### 4.1 项目目录结构
```
Troll-vs-Troll/
├── README.md
├── Developer_Guidelines.md
├── ref/
│   ├── 吴佳泽_开题报告_1.0.docx
│   ├── UNIHIKER_M10_Python_Documentation.md
│   └── UNIHIKER_M10_Detailed_API_Documentation.md
├── src/
│   ├── main.py
│   ├── sensors/
│   ├── control/
│   └── utils/
└── tests/
```

### 4.2 模块组织
- 按功能模块组织代码
- 传感器相关代码放在 [sensors](file:///E:/Comp/特需/Troll-vs-Troll-main/Troll-vs-Troll-main/src/sensors) 目录
- 控制算法相关代码放在 [control](file:///E:/Comp/特需/Troll-vs-Troll-main/Troll-vs-Troll-main/src/control) 目录
- 工具函数放在 [utils](file:///E:/Comp/特需/Troll-vs-Troll-main/Troll-vs-Troll-main/src/utils) 目录

## 5. 测试规范

### 5.1 单元测试
- 为每个功能模块编写单元测试
- 使用 Python 标准库的 unittest 框架
- 测试覆盖率应达到 80% 以上

### 5.2 集成测试
- 测试模块间的接口和交互
- 在实际硬件上进行端到端测试

### 5.3 硬件测试
- 在真实环境中测试传感器数据采集
- 验证控制算法的实时响应性能

## 6. 版本控制

### 6.1 Git 分支策略
- `main` 分支：稳定版本
- `develop` 分支：开发版本
- `feature/*` 分支：功能开发
- `bugfix/*` 分支：错误修复

### 6.2 提交信息规范
- 使用清晰、有意义的提交信息
- 格式：`<type>: <subject>`
- 类型包括：feat（新功能）、fix（修复）、docs（文档）、style（格式）、refactor（重构）、test（测试）、chore（杂项）

## 7. 文档要求

### 7.1 代码注释
- 函数和类必须有文档字符串
- 复杂算法需要添加注释说明
- 重要业务逻辑需要注释解释

### 7.2 项目文档
- 维护 README.md 文件
- 更新开发者指南
- 记录 API 变更

### 7.3 版本日志要求
- 在每个程序及文件开头需要有属于其自己的版本日志
- 版本日志应声明该文件被做了什么改动，是否成功
- 版本日志格式如下：
  ```
  ## 版本日志
  - v1.0.0 [日期]: 初始版本
  - v1.0.1 [日期]: [具体改动描述] - [成功/失败]
  ```

### 7.4 README更新要求
- 每写出一个新功能，都必须更新主README文件
- 在README中声明新功能的作用和用法
- 确保README始终反映项目的最新功能状态

## 8. 安全和性能考虑

### 8.1 安全性
- 验证传感器输入数据的有效性
- 实现异常处理机制
- 防止系统在异常情况下的危险行为

### 8.2 性能
- 优化算法执行效率
- 合理管理内存使用
- 实现适当的错误恢复机制

## 9. 开发流程

1. **需求分析**：明确功能需求和性能指标
2. **设计阶段**：设计系统架构和模块接口
3. **实现阶段**：
   - 添加TODO注释
   - 实现功能
   - 编写测试
4. **测试阶段**：单元测试、集成测试、硬件测试
5. **审查阶段**：代码审查和功能验证
6. **完成阶段**：移除TODO标记

## 10. 参考资料管理

### 10.1 参考文件存放
- 所有用且必须阅读的参考性内容都会放在 [/ref](file:///E:/Comp/特需/Troll-vs-Troll-main/Troll-vs-Troll-main/ref) 目录下
- 包括硬件文档、API文档、设计文档等
- 新的参考资料应及时归档到该目录

### 10.2 模块兼容性
- 在引入新模块前检查与UNIHIKER M10的兼容性
- 验证模块在目标Python版本下的运行情况

### 10.3 硬件接口
- 严格按照UNIHIKER M10的接口规范连接传感器
- 注意电压电平匹配和电气安全

---

本指南旨在确保项目的高质量开发和长期可维护性。所有开发者都应熟悉并遵循这些规范。